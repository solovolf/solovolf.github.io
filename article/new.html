<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,max-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>文章列表</title>
    <link rel="stylesheet" href="css/new.css">
</head>

<body>
    <div class="head">
        <div class="btn-category"></div>
        <span></span>
        <div class="btn-search"></div>
    </div>

    <div class="search-wrap">
        <input type="search">
    </div>
    <div class="category-wrap">
        <div class="category-content"></div>
    </div>
    <div class="content">

    </div>
    <script src="js/data.js"></script>
    <script>
        (function() {
            var showCategoryList = false
            var categoryWrap = document.querySelector('.category-wrap')
            var categoryContent = document.querySelector('.category-content')
            var contentEle = document.querySelector('.content')
            var headEle = document.querySelector('.head span')
            var searchWrap = document.querySelector('.search-wrap')

            function showOrHideCa() {
                if (!showCategoryList) {
                    showCategoryList = true
                    categoryWrap.classList.add('show')
                } else {
                    showCategoryList = false
                    categoryWrap.classList.remove('show')
                }
            }

            function hideCategoryWrap() {
                showCategoryList = false
                categoryWrap.classList.remove('show')
            }
            document.querySelector('.btn-category').addEventListener('click', function() {
                showOrHideCa()
            })

            categoryWrap.addEventListener('click', function(eve) {
                if (eve.target.className.indexOf('category-wrap') > -1) {
                    hideCategoryWrap()
                }
            })

            var categoryListHtml = '<ul>'
            for (var i = 0; i < menuList.length; i++) {
                categoryListHtml += '<li data-src="' + menuList[i].type + '">' + menuList[i].name + '</li>'
            }
            categoryListHtml += '</ul>'
            categoryContent.innerHTML = categoryListHtml

            var contentHtml = ''

            var caliList = categoryContent.querySelectorAll('li')
            for (var i = 0; i < caliList.length; i++) {
                caliList[i].addEventListener('click', function(eve) {
                    //点击后修改颜色
                    var activeItem = categoryContent.querySelector('.active')
                    if (activeItem) {
                        activeItem.classList.remove('active')
                    }
                    eve.currentTarget.classList.add('active')
                        //修改头部文字
                    headEle.innerHTML = eve.currentTarget.innerHTML
                        //生成页面内容
                    contentHtml = ''
                    var type = eve.currentTarget.dataset.src
                    var articleArr = articleList[type]
                    for (var i = 0; i < articleArr.length; i++) {
                        contentHtml += '<a target="_blank" href="' + articleArr[i].url + '">' + articleArr[i].name + '</a>'
                    }
                    contentEle.innerHTML = contentHtml
                    hideCategoryWrap()
                })
            }

            caliList[0].click()


            //查询交互
            document.querySelector('.btn-search').addEventListener('click', function() {
                if (searchWrap.classList.contains('show')) {
                    searchWrap.classList.remove('show')
                } else {
                    searchWrap.classList.add('show')
                }
            })
        })()
    </script>
</body>

</html>